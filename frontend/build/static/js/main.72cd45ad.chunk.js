(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,a,t){e.exports=t(390)},390:function(e,a,t){"use strict";t.r(a);var n=t(20),r=t(0),c=t.n(r),i=t(31),l=t.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=t(18),u=t(19),s=t(395),m=t(397),d=t(396),p=t(80),f=t(65),g=t.n(f),E=t(88),b=t.n(E),v=t(156),h=t.n(v),k=Object(p.createMuiTheme)({palette:{primary:{light:g.a[500],main:g.a[700],dark:g.a[900]},secondary:{light:b.a[300],main:b.a[500],dark:b.a[700]}},typography:{useNextVariants:!0}});var y=function(e){return function(a){return c.a.createElement(p.MuiThemeProvider,{theme:k},c.a.createElement(h.a,null),c.a.createElement(e,a))}},O=t(12),j=t(6),w=t.n(j),N=t(27),x=t.n(N),S=t(37),I=t(42),C=t.n(I),$=t(82),T=t.n($),B=t(28),W=t.n(B),q=t(35),L=t.n(q),F=t(159),D=t.n(F);function R(){var e=Object(n.a)(["\n  query($search: String) {\n    tracks(search: $search) {\n      id\n      title\n      description\n      url\n      likes {\n        id\n      }\n      postedBy {\n        id\n        username\n      }\n    }\n  }\n"]);return R=function(){return e},e}var _=Object(u.b)(R()),z=w()(function(e){return{root:{padding:"2px 4px",margin:e.spacing.unit,display:"flex",alignItems:"center"}}})(function(e){var a=e.classes,t=e.setSearchResults,n=Object(r.useState)(""),i=Object(O.a)(n,2),l=i[0],u=i[1],s=Object(r.useRef)(),m=function(){t([]),u(""),s.current.focus()},d=function(){var e=Object(S.a)(x.a.mark(function e(a,n){var r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,n.query({query:_,variables:{search:l}});case 3:r=e.sent,t(r.data.tracks);case 5:case"end":return e.stop()}},e)}));return function(a,t){return e.apply(this,arguments)}}();return c.a.createElement(o.a,null,function(e){return c.a.createElement("form",{onSubmit:function(a){return d(a,e)}},c.a.createElement(W.a,{className:a.root,elevation:1},c.a.createElement(L.a,{onClick:m},c.a.createElement(T.a,null)),c.a.createElement(C.a,{fullWidth:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u0442\u0440\u0435\u043a\u043e\u0432",InputProps:{disableUnderline:!0},onChange:function(e){return u(e.target.value)},value:l,inputRef:s}),c.a.createElement(L.a,{type:"submit"},c.a.createElement(D.a,null))))})}),U=t(109),A=t.n(U),M=t(169),P=t.n(M),Q=t(170),J=t.n(Q),Y=t(22),V=t.n(Y),G=t(166),H=t.n(G),K=t(171),X=t.n(K),Z=t(167),ee=t.n(Z),ae=t(172),te=t.n(ae),ne=t(168),re=t.n(ne),ce=t(394),ie=t(161),le=t.n(ie),oe=function(e){var a=e.url;return c.a.createElement("div",null,c.a.createElement(le.a,{url:a,height:"30px",width:"500px",controls:!0}))},ue=t(162),se=t.n(ue);function me(){var e=Object(n.a)(["\n  mutation($trackId: Int!) {\n    createLike(trackId: $trackId) {\n      track {\n        id\n        likes {\n          id\n        }\n      }\n    }\n  }\n"]);return me=function(){return e},e}var de=Object(u.b)(me()),pe=w()(function(e){return{iconButton:{color:"deeppink"},icon:{marginLeft:e.spacing.unit/2}}})(function(e){var a=e.classes,t=e.trackId,n=e.likeCount,i=Object(r.useContext)(Da);return c.a.createElement(o.c,{mutation:de,variables:{trackId:t},onCompleted:function(e){console.log({data:e})},refetchQueries:function(){return[{query:Ra}]}},function(e){return c.a.createElement(L.a,{onClick:function(a){a.stopPropagation(),e()},className:a.iconButton,disabled:i.likeSet.findIndex(function(e){return e.track.id===t})>-1},n,c.a.createElement(se.a,{className:a.icon}))})}),fe=t(113),ge=t(163),Ee=t.n(ge);function be(){var e=Object(n.a)(["\n  mutation($trackId: Int!) {\n    deleteTrack(trackId: $trackId) {\n      trackId\n    }\n  }\n"]);return be=function(){return e},e}var ve=Object(u.b)(be()),he=function(e){var a=e.track;return Object(r.useContext)(Da).id===a.postedBy.id&&c.a.createElement(o.c,{mutation:ve,variables:{trackId:a.id},onCompleted:function(e){console.log({data:e})},update:function(e,a){var t=a.data.deleteTrack,n=e.readQuery({query:ra}),r=n.tracks.findIndex(function(e){return Number(e.id)===t.trackId}),c=[].concat(Object(fe.a)(n.tracks.slice(0,r)),Object(fe.a)(n.tracks.slice(r+1)));e.writeQuery({query:ra,data:{tracks:c}})}},function(e){return c.a.createElement(L.a,{onClick:e},c.a.createElement(Ee.a,null))})},ke=t(84),ye=t.n(ke),Oe=t(165),je=t.n(Oe),we=t(21),Ne=t.n(we),xe=t(49),Se=t.n(xe),Ie=t(53),Ce=t.n(Ie),$e=t(51),Te=t.n($e),Be=t(52),We=t.n(Be),qe=t(26),Le=t.n(qe),Fe=t(64),De=t.n(Fe),Re=t(50),_e=t.n(Re),ze=t(54),Ue=t.n(ze),Ae=t(85),Me=t.n(Ae),Pe=t(164),Qe=t.n(Pe),Je=w()(function(e){return{snackbar:{margin:e.spacing.unit}}})(function(e){var a=e.classes,t=e.error,n=Object(r.useState)(!0),i=Object(O.a)(n,2),l=i[0],o=i[1];return c.a.createElement(Qe.a,{open:l,className:a.snackbar,message:t.message,action:c.a.createElement(Ne.a,{onClick:function(){return o(!1)},color:"secondary",size:"small"},"Close")})});function Ye(){var e=Object(n.a)(["\n  mutation($trackId: Int!, $title: String, $url: String, $description: String) {\n    updateTrack(\n      trackId: $trackId\n      title: $title\n      url: $url\n      description: $description\n    ) {\n      track {\n        id\n        title\n        description\n        url\n        likes {\n          id\n        }\n        postedBy {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return Ye=function(){return e},e}var Ve=Object(u.b)(Ye()),Ge=w()(function(e){return{container:{display:"flex",flexWrap:"wrap"},dialog:{margin:"0 auto",maxWidth:550},textField:{margin:e.spacing.unit},cancel:{color:"red"},save:{color:"green"},button:{margin:2*e.spacing.unit},icon:{marginLeft:e.spacing.unit},input:{display:"none"}}})(function(e){var a=e.classes,t=e.track,n=Object(r.useContext)(Da),i=Object(r.useState)(!1),l=Object(O.a)(i,2),u=l[0],s=l[1],m=Object(r.useState)(t.title),d=Object(O.a)(m,2),p=d[0],f=d[1],g=Object(r.useState)(t.description),E=Object(O.a)(g,2),b=E[0],v=E[1],h=Object(r.useState)(""),k=Object(O.a)(h,2),y=k[0],j=k[1],w=Object(r.useState)(!1),N=Object(O.a)(w,2),I=N[0],$=N[1],T=Object(r.useState)(""),B=Object(O.a)(T,2),W=B[0],q=B[1],F=n.id===t.postedBy.id,D=function(e){var a=e.target.files[0];a&&a.size>1e7?q("".concat(a.name,": File size too large")):(j(a),q(""))},R=function(){var e=Object(S.a)(x.a.mark(function e(){var a,t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FormData).append("file",y),a.append("resource_type","raw"),a.append("upload_preset","react-tracks"),a.append("cloud_name","nyancetch"),e.next=8,ye.a.post("https://api.cloudinary.com/v1_1/nyancetch/raw/upload",a);case 8:return t=e.sent,e.abrupt("return",t.data.url);case 12:e.prev=12,e.t0=e.catch(0),console.error("Error uploading file",e.t0),$(!1);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(S.a)(x.a.mark(function e(a,n){var r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),$(!0),e.next=4,R();case 4:r=e.sent,n({variables:{trackId:t.id,title:p,description:b,url:r}});case 6:case"end":return e.stop()}},e)}));return function(a,t){return e.apply(this,arguments)}}();return F&&c.a.createElement(c.a.Fragment,null,c.a.createElement(L.a,{onClick:function(){return s(!0)}},c.a.createElement(je.a,null)),c.a.createElement(o.c,{mutation:Ve,onCompleted:function(e){console.log({data:e}),$(!1),s(!1),f(""),v(""),j("")}},function(e,t){t.loading;var n=t.error;return n?c.a.createElement(Je,{error:n}):c.a.createElement(Se.a,{open:u,className:a.dialog},c.a.createElement("form",{onSubmit:function(a){return _(a,e)}},c.a.createElement(_e.a,null,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0440\u0435\u043a"),c.a.createElement(Te.a,null,c.a.createElement(We.a,null,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438 \u0430\u0443\u0434\u0438\u043e\u0444\u0430\u0439\u043b (\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 10MB)"),c.a.createElement(Le.a,{fullWidth:!0},c.a.createElement(C.a,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(e){return f(e.target.value)},value:p,className:a.textField})),c.a.createElement(Le.a,{fullWidth:!0},c.a.createElement(C.a,{multiline:!0,rows:"4",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(e){return v(e.target.value)},value:b,className:a.textField})),c.a.createElement(Le.a,{error:Boolean(W)},c.a.createElement("input",{id:"audio",required:!0,type:"file",accept:"audio/mp3,audio/wav",className:a.input,onChange:D}),c.a.createElement("label",{htmlFor:"audio"},c.a.createElement(Ne.a,{variant:"outlined",color:y?"secondary":"inherit",component:"span",className:a.button},"Audio File",c.a.createElement(Me.a,{className:a.icon})),y&&y.name,c.a.createElement(De.a,null,W)))),c.a.createElement(Ce.a,null,c.a.createElement(Ne.a,{disabled:I,onClick:function(){return s(!1)},className:a.cancel},"\u041e\u0442\u043c\u0435\u043d\u0430"),c.a.createElement(Ne.a,{disabled:I||!p.trim()||!b.trim()||!y,type:"submit",className:a.save},I?c.a.createElement(Ue.a,{className:a.save,size:24}):"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"))))}))}),He=w()({root:{display:"flex",flexWrap:"wrap"},details:{alignItems:"center"},link:{color:"#424242",textDecoration:"none","&:hover":{color:"black"}}})(function(e){var a=e.classes,t=e.tracks;return c.a.createElement(A.a,null,t.map(function(e){return c.a.createElement(H.a,{key:e.id},c.a.createElement(ee.a,{expandIcon:c.a.createElement(re.a,null)},c.a.createElement(P.a,{className:a.root},c.a.createElement(pe,{trackId:e.id,likeCount:e.likes.length}),c.a.createElement(J.a,{primaryTypographyProps:{variant:"subheading",color:"primary"},primary:e.title,secondary:c.a.createElement(ce.a,{className:a.link,to:"/profile/".concat(e.postedBy.id)},e.postedBy.username)}),c.a.createElement(oe,{url:e.url}))),c.a.createElement(X.a,{className:a.details},c.a.createElement(V.a,{variant:"body1"},e.description)),c.a.createElement(te.a,null,c.a.createElement(Ge,{track:e}),c.a.createElement(he,{track:e})))}))}),Ke=t(173),Xe=t.n(Ke);function Ze(){var e=Object(n.a)(["\n  mutation($title: String!, $description: String!, $url: String!) {\n    createTrack(title: $title, description: $description, url: $url) {\n      track {\n        id\n        title\n        description\n        url\n        likes {\n          id\n        }\n        postedBy {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return Ze=function(){return e},e}var ea=Object(u.b)(Ze()),aa=w()(function(e){return{container:{display:"flex",flexWrap:"wrap"},dialog:{margin:"0 auto",maxWidth:550},textField:{margin:e.spacing.unit},cancel:{color:"red"},save:{color:"green"},button:{margin:2*e.spacing.unit},icon:{marginLeft:e.spacing.unit},input:{display:"none"},fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit,zIndex:"200"}}})(function(e){var a=e.classes,t=Object(r.useState)(!1),n=Object(O.a)(t,2),i=n[0],l=n[1],u=Object(r.useState)(""),s=Object(O.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],E=f[1],b=Object(r.useState)(""),v=Object(O.a)(b,2),h=v[0],k=v[1],y=Object(r.useState)(!1),j=Object(O.a)(y,2),w=j[0],N=j[1],I=Object(r.useState)(""),$=Object(O.a)(I,2),B=$[0],W=$[1],q=function(e){var a=e.target.files[0];a&&a.size>1e7?W("".concat(a.name,": File size too large")):(k(a),W(""))},L=function(){var e=Object(S.a)(x.a.mark(function e(){var a,t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FormData).append("file",h),a.append("resource_type","raw"),a.append("upload_preset","react-tracks"),a.append("cloud_name","nyancetch"),e.next=8,ye.a.post("https://api.cloudinary.com/v1_1/nyancetch/raw/upload",a);case 8:return t=e.sent,e.abrupt("return",t.data.url);case 12:e.prev=12,e.t0=e.catch(0),console.error("Error uploading file",e.t0),N(!1);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(S.a)(x.a.mark(function e(a,t){var n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),N(!0),e.next=4,L();case 4:n=e.sent,t({variables:{title:m,description:g,url:n}});case 6:case"end":return e.stop()}},e)}));return function(a,t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ne.a,{onClick:function(){return l(!0)},variant:"fab",className:a.fab,color:"secondary"},i?c.a.createElement(T.a,null):c.a.createElement(Xe.a,null)),c.a.createElement(o.c,{mutation:ea,onCompleted:function(e){console.log({data:e}),N(!1),l(!1),d(""),E(""),k("")},update:function(e,a){var t=a.data.createTrack,n=e.readQuery({query:ra}).tracks.concat(t.track);e.writeQuery({query:ra,data:{tracks:n}})}},function(e,t){t.loading;var n=t.error;return n?c.a.createElement(Je,{error:n}):c.a.createElement(Se.a,{open:i,className:a.dialog},c.a.createElement("form",{onSubmit:function(a){return F(a,e)}},c.a.createElement(_e.a,null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0435\u043a"),c.a.createElement(Te.a,null,c.a.createElement(We.a,null,"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438 \u0410\u0443\u0434\u0438\u043e\u0444\u0430\u0439\u043b (\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 10MB)"),c.a.createElement(Le.a,{fullWidth:!0},c.a.createElement(C.a,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(e){return d(e.target.value)},value:m,className:a.textField})),c.a.createElement(Le.a,{fullWidth:!0},c.a.createElement(C.a,{multiline:!0,rows:"4",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(e){return E(e.target.value)},value:g,className:a.textField})),c.a.createElement(Le.a,{error:Boolean(B)},c.a.createElement("input",{id:"audio",required:!0,type:"file",accept:"audio/mp3,audio/wav",className:a.input,onChange:q}),c.a.createElement("label",{htmlFor:"audio"},c.a.createElement(Ne.a,{variant:"outlined",color:h?"secondary":"inherit",component:"span",className:a.button},"\u0410\u0443\u0434\u0438\u043e\u0444\u0430\u0439\u043b",c.a.createElement(Me.a,{className:a.icon})),h&&h.name,c.a.createElement(De.a,null,B)))),c.a.createElement(Ce.a,null,c.a.createElement(Ne.a,{disabled:w,onClick:function(){return l(!1)},className:a.cancel},"\u041e\u0442\u043c\u0435\u043d\u0430"),c.a.createElement(Ne.a,{disabled:w||!m.trim()||!g.trim()||!h,type:"submit",className:a.save},w?c.a.createElement(Ue.a,{className:a.save,size:24}):"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0435\u043a"))))}))}),ta=w()(function(e){return{root:{width:"100vw",textAlign:"center"},progress:{margin:2*e.spacing.unit,color:e.palette.secondary.dark}}})(function(e){var a=e.classes;return c.a.createElement("div",{className:a.root},c.a.createElement(Ue.a,{className:a.progress}))});function na(){var e=Object(n.a)(["\n  query getTracksQuery {\n    tracks {\n      id\n      title\n      description\n      url\n      likes {\n        id\n      }\n      postedBy {\n        id\n        username\n      }\n    }\n  }\n"]);return na=function(){return e},e}var ra=Object(u.b)(na()),ca=w()(function(e){return{container:{margin:"0 auto",maxWidth:960,padding:2*e.spacing.unit}}})(function(e){var a=e.classes,t=Object(r.useState)([]),n=Object(O.a)(t,2),i=n[0],l=n[1];return c.a.createElement("div",{className:a.container},c.a.createElement(z,{setSearchResults:l}),c.a.createElement(aa,null),c.a.createElement(o.d,{query:ra},function(e){var a=e.data,t=e.loading,n=e.error;if(t)return c.a.createElement(ta,null);if(n)return c.a.createElement(Je,{error:n});var r=i.length>0?i:a.tracks;return c.a.createElement(He,{tracks:r})}))}),ia=t(55),la=t(175),oa=t.n(la),ua=t(176),sa=t.n(ua),ma=t(56),da=t.n(ma),pa=t(178),fa=t.n(pa),ga=t(177),Ea=t.n(ga),ba=t(112),va=t.n(ba),ha=t(174),ka=t.n(ha);function ya(){var e=Object(n.a)(["\n  query($id: Int!) {\n    user(id: $id) {\n      id\n      username\n      dateJoined\n      likeSet {\n        id\n        track {\n          id\n          title\n          url\n          likes {\n            id\n          }\n          postedBy {\n            id\n            username\n          }\n        }\n      }\n      trackSet {\n        id\n        title\n        url\n        likes {\n          id\n        }\n      }\n    }\n  }\n"]);return ya=function(){return e},e}var Oa=Object(u.b)(ya()),ja=w()(function(e){return{paper:Object(ia.a)({width:"auto",display:"block",padding:2*e.spacing.unit,marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit,marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},e.breakpoints.up("md"),{width:650,marginLeft:"auto",marginRight:"auto"}),card:{display:"flex",justifyContent:"center"},title:{display:"flex",alignItems:"center",marginBottom:2*e.spacing.unit},audioIcon:{color:"purple",fontSize:30,marginRight:e.spacing.unit},thumbIcon:{color:"green",marginRight:e.spacing.unit},divider:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit}}})(function(e){var a=e.classes,t=e.match.params.id;return c.a.createElement(o.d,{query:Oa,variables:{id:t}},function(e){var t=e.data,n=e.loading,r=e.error;return n?c.a.createElement(ta,null):r?c.a.createElement(Je,{error:r}):c.a.createElement("div",null,c.a.createElement(oa.a,{className:a.card},c.a.createElement(sa.a,{avatar:c.a.createElement(da.a,null,t.user.username[0]),title:t.user.username,subheader:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0441\u044f ".concat(ka()(t.user.dateJoined,"MMM Do, YYYY"))})),c.a.createElement(W.a,{elevation:1,className:a.paper},c.a.createElement(V.a,{variant:"title",className:a.title},c.a.createElement(Ea.a,{className:a.audioIcon}),"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0440\u0435\u043a\u0438"),t.user.trackSet.map(function(e){return c.a.createElement("div",{key:e.id},c.a.createElement(V.a,null,e.title," \xb7 ",e.likes.length," \u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"),c.a.createElement(oe,{url:e.url}),c.a.createElement(va.a,{className:a.divider}))})),c.a.createElement(W.a,{elevation:1,className:a.paper},c.a.createElement(V.a,{variant:"title",className:a.title},c.a.createElement(fa.a,{className:a.thumbIcon}),"\u041f\u043e\u043d\u0440\u0430\u0432\u0438\u0432\u0448\u0438\u0435\u0441\u044f \u0442\u0440\u0435\u043a\u0438"),t.user.likeSet.map(function(e){var t=e.track;return c.a.createElement("div",{key:t.id},c.a.createElement(V.a,null,t.postedBy.username," "," | ",t.title," "," | ","\u041f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c ",t.likes.length),c.a.createElement(oe,{url:t.url}),c.a.createElement(va.a,{className:a.divider}))})))})}),wa=t(180),Na=t.n(wa),xa=t(181),Sa=t.n(xa),Ia=t(182),Ca=t.n(Ia),$a=t(183),Ta=t.n($a),Ba=t(179),Wa=t.n(Ba),qa=w()({root:{cursor:"pointer",display:"flex"},buttonIcon:{marginLeft:"5px"}})(function(e){var a=e.classes;return c.a.createElement(o.a,null,function(e){return c.a.createElement(Ne.a,{onClick:function(){return function(e){localStorage.removeItem("authToken"),e.writeData({data:{isLoggedIn:!1}}),console.log("Signed out user",e)}(e)}},c.a.createElement(V.a,{variant:"body1",className:a.buttonText,color:"secondary"},"\u0412\u044b\u0445\u043e\u0434"),c.a.createElement(Wa.a,{className:a.buttonIcon,color:"secondary"}))})}),La=w()(function(e){return{root:{flexGrow:1,margin:0,padding:0},grow:{flexGrow:1,display:"flex",alignItems:"center",textDecoration:"none"},logo:{marginRight:e.spacing.unit,fontSize:45},faceIcon:{marginRight:e.spacing.unit,fontSize:30,color:"white"},username:{color:"white",fontSize:30}}})(function(e){var a=e.classes,t=e.currentUser;return c.a.createElement(Na.a,{position:"static",className:a.root},c.a.createElement(Sa.a,null,c.a.createElement(ce.a,{to:"/",className:a.grow},c.a.createElement(Ca.a,{className:a.logo,color:"secondary"}),c.a.createElement(V.a,{variant:"headline",color:"secondary",noWrap:!0},"ReactTracks")),t&&c.a.createElement(ce.a,{to:"/profile/".concat(t.id),className:a.grow},c.a.createElement(Ta.a,{className:a.faceIcon}),c.a.createElement(V.a,{variant:"headline",className:a.username,noWrap:!0},t.username)),c.a.createElement(qa,null)))});function Fa(){var e=Object(n.a)(["\n  {\n    me {\n      id\n      username\n      email\n      likeSet {\n        track {\n          id\n        }\n      }\n    }\n  }\n"]);return Fa=function(){return e},e}var Da=c.a.createContext(),Ra=Object(u.b)(Fa()),_a=y(function(){return c.a.createElement(o.d,{query:Ra,fetchPolicy:"cache-and-network"},function(e){var a=e.data,t=e.loading,n=e.error;if(t)return c.a.createElement(ta,null);if(n)return c.a.createElement(Je,{error:n});var r=a.me;return c.a.createElement(s.a,null,c.a.createElement(Da.Provider,{value:r},c.a.createElement(La,{currentUser:r}),c.a.createElement(m.a,null,c.a.createElement(d.a,{exact:!0,path:"/",component:ca}),c.a.createElement(d.a,{path:"/profile/:id",component:ja}))))})}),za=t(36),Ua=t.n(za),Aa=t(43),Ma=t.n(Aa),Pa=t(185),Qa=t.n(Pa);function Ja(){var e=Object(n.a)(["\n  mutation($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n      token\n    }\n  }\n"]);return Ja=function(){return e},e}var Ya=Object(u.b)(Ja()),Va=w()(function(e){return{root:Object(ia.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up("md"),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:2*e.spacing.unit},title:{marginTop:2*e.spacing.unit,color:e.palette.secondary.main},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit}}})(function(e){var a=e.classes,t=e.setNewUser,n=Object(r.useState)(""),i=Object(O.a)(n,2),l=i[0],u=i[1],s=Object(r.useState)(""),m=Object(O.a)(s,2),d=m[0],p=m[1],f=function(){var e=Object(S.a)(x.a.mark(function e(a,t,n){var r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t();case 3:r=e.sent,localStorage.setItem("authToken",r.data.tokenAuth.token),n.writeData({data:{isLoggedIn:!0}});case 6:case"end":return e.stop()}},e)}));return function(a,t,n){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:a.root},c.a.createElement(W.a,{className:a.paper},c.a.createElement(da.a,{className:a.avatar},c.a.createElement(Qa.a,null)),c.a.createElement(V.a,{variant:"title"},"\u0412\u043e\u0439\u0442\u0438"),c.a.createElement(o.c,{mutation:Ya,variables:{username:l,password:d}},function(e,n){var r=n.loading,i=n.error,o=(n.called,n.client);return c.a.createElement("form",{onSubmit:function(a){return f(a,e,o)},className:a.form},c.a.createElement(Le.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(Ma.a,{htmlFor:"username"},"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u044f"),c.a.createElement(Ua.a,{id:"username",onChange:function(e){return u(e.target.value)}})),c.a.createElement(Le.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(Ma.a,{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),c.a.createElement(Ua.a,{id:"password",type:"password",onChange:function(e){return p(e.target.value)}})),c.a.createElement(Ne.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:r||!l.trim()||!d.trim(),className:a.submit},r?"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f...":"\u0412\u043e\u0439\u0442\u0438"),c.a.createElement(Ne.a,{onClick:function(){return t(!0)},color:"secondary",variant:"outlined",fullWidth:!0},"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),i&&c.a.createElement(Je,{error:i}))})))}),Ga=t(110),Ha=t.n(Ga),Ka=t(186),Xa=t.n(Ka),Za=t(187),et=t.n(Za);function at(){var e=Object(n.a)(["\n  mutation($username: String!, $email: String!, $password: String!) {\n    createUser(username: $username, email: $email, password: $password) {\n      user {\n        username\n        email\n      }\n    }\n  }\n"]);return at=function(){return e},e}function tt(e){return c.a.createElement(Ha.a,Object.assign({direction:"up"},e))}var nt=Object(u.b)(at()),rt=w()(function(e){return{root:Object(ia.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up("md"),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:2*e.spacing.unit},title:{marginTop:2*e.spacing.unit,color:e.palette.openTitle},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},icon:{padding:"0px 2px 2px 0px",verticalAlign:"middle",color:"green"}}})(function(e){var a=e.classes,t=e.setNewUser,n=Object(r.useState)(""),i=Object(O.a)(n,2),l=i[0],u=i[1],s=Object(r.useState)(""),m=Object(O.a)(s,2),d=m[0],p=m[1],f=Object(r.useState)(""),g=Object(O.a)(f,2),E=g[0],b=g[1],v=Object(r.useState)(!1),h=Object(O.a)(v,2),k=h[0],y=h[1];return c.a.createElement("div",{className:a.root},c.a.createElement(W.a,{className:a.paper},c.a.createElement(da.a,{className:a.avatar},c.a.createElement(Xa.a,null)),c.a.createElement(V.a,{variant:"headline"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),c.a.createElement(o.c,{mutation:nt,variables:{username:l,email:d,password:E},onCompleted:function(e){console.log({data:e}),y(!0)}},function(e,n){var r=n.loading,i=n.error;return c.a.createElement("form",{onSubmit:function(a){return function(e,a){e.preventDefault(),a()}(a,e)},className:a.form},c.a.createElement(Le.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(Ma.a,{htmlFor:"username"},"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),c.a.createElement(Ua.a,{id:"username",onChange:function(e){return u(e.target.value)}})),c.a.createElement(Le.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(Ma.a,{htmlFor:"email"},"Email"),c.a.createElement(Ua.a,{id:"email",type:"email",onChange:function(e){return p(e.target.value)}})),c.a.createElement(Le.a,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(Ma.a,{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),c.a.createElement(Ua.a,{id:"password",type:"password",onChange:function(e){return b(e.target.value)}})),c.a.createElement(Ne.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",disabled:r||!l.trim()||!d.trim()||!E.trim(),className:a.submit},r?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),c.a.createElement(Ne.a,{onClick:function(){return t(!1)},color:"primary",variant:"outlined",fullWidth:!0},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"),i&&c.a.createElement(Je,{error:i}))})),c.a.createElement(Se.a,{open:k,disableBackdropClick:!0,TransitionComponent:tt},c.a.createElement(_e.a,null,c.a.createElement(et.a,{className:a.icon}),"New Account"),c.a.createElement(Te.a,null,c.a.createElement(We.a,null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d!")),c.a.createElement(Ce.a,null,c.a.createElement(Ne.a,{color:"primary",variant:"contained",onClick:function(){return t(!1)}},"Login"))))}),ct=y(function(){var e=Object(r.useState)(!0),a=Object(O.a)(e,2),t=a[0],n=a[1];return t?c.a.createElement(rt,{setNewUser:n}):c.a.createElement(Va,{setNewUser:n})});function it(){var e=Object(n.a)(["\n  query {\n    isLoggedIn @client\n  }\n"]);return it=function(){return e},e}var lt=new u.a({uri:"http://".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).DOMAIN_NAME,"/").concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).API_NAME,"/"),fetchOptions:{credentials:"include"},request:function(e){var a=localStorage.getItem("authToken")||"";e.setContext({headers:{Authorization:"JWT ".concat(a)}})},clientState:{defaults:{isLoggedIn:!!localStorage.getItem("authToken")}}}),ot=Object(u.b)(it());l.a.render(c.a.createElement(o.b,{client:lt},c.a.createElement(o.d,{query:ot},function(e){return e.data.isLoggedIn?c.a.createElement(_a,null):c.a.createElement(ct,null)})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[188,1,2]]]);
//# sourceMappingURL=main.72cd45ad.chunk.js.map